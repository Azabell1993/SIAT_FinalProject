{"version":3,"file":"v-md-date-range-picker.min.js","sources":["../src/components/Calendar.vue","../node_modules/vue-runtime-helpers/dist/normalize-component.js","../node_modules/vue-runtime-helpers/dist/inject-style/browser.js","../src/directives/clickoutside.js","../src/constant/index.js","../src/index.js"],"sourcesContent":["<template>\n  <table class=\"calendar-table\">\n    <thead>\n      <tr>\n        <th class=\"prev available v-drp__css-icon-wrapper\" @click=\"$emit('clickPrevMonth')\">\n          <i :class=\"[arrowLeftClass]\"></i>\n        </th>\n        <th colspan=\"5\" class=\"month\">\n          {{ monthName }}\n          <!-- select year start -->\n          <select class=\"yearselect\" v-model=\"activeYear\" v-if=\"picker.showYearSelect\">\n            <option v-for=\"(year, index) in RangeOfYear\" :value=\"year\" :key=\"index\">{{year}}</option>\n          </select>\n          <span v-else>{{ activeYear }}</span>\n          <!-- select year end -->\n        </th>\n        <th class=\"next available v-drp__css-icon-wrapper\" @click=\"$emit('clickNextMonth')\">\n          <i :class=\"[arrowRightClass]\"></i>\n        </th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <th v-for=\"(weekDay, dayIndex) in locale.daysOfWeek\" :key=\"dayIndex\">\n          {{ weekDay }}\n        </th>\n      </tr>\n      <tr v-for=\"(dateRow, rowIndex) in calendar\" :key=\"rowIndex\">\n        <slot name=\"date-slot\" v-for=\"(date, dateIndex) in dateRow\">\n          <td\n            class=\"calendar-cell\"\n            :key=\"dateIndex\"\n            :class=\"dayClass(date)\"\n            @click=\"$emit('dateClick', date)\"\n            @mouseover=\"$emit('hoverDate', date)\"\n          >\n            <div class=\"calendar-cell__content\">\n              {{ date | dateNum }}\n            </div>\n          </td>\n        </slot>\n      </tr>\n    </tbody>\n  </table>\n</template>\n\n<script>\nimport moment from 'moment';\n\nfunction clean (momentDate) {\n  /* eslint-disable */\n  return momentDate.clone().hour(0).minute(0).second(0).millisecond(0);\n}\n\n// _.range([start=0], end, [step=1])\nfunction range (start = 0, end, step = 1) {\n  const arr = [];\n  start = +start;\n  end = +end;\n  for (let i = start; i <= end; i += step) {\n    arr.push(i);\n  }\n  return arr;\n}\n\nexport default {\n  name: 'calendar',\n  inject: ['picker'],\n  props: ['location', 'calendarMonth', 'locale', 'start', 'end'],\n  methods: {\n    dayClass (date) {\n      const dt = date.clone();\n      const cleanDt = clean(dt.clone());\n      const cleanToday = clean(moment());\n      const cleanStart = clean(this.start);\n      const cleanEnd = clean(this.end);\n      const hoverStart = clean(this.picker.hoverStart_);\n      const hoverEnd = clean(this.picker.hoverEnd_);\n\n      return {\n        off: dt.month() !== this.month,\n        // TODO what isoWeekday means ??\n        weekend: dt.isoWeekday() > 5,\n        today: cleanDt.isSame(cleanToday),\n        // dt === start || dt === end\n        active: cleanDt.isSame(cleanStart) || cleanDt.isSame(cleanEnd),\n        //  start <= dt <= end || hoverStart <= dt <= hoverEnd\n        // 当第一次点击(确认了 start )之后，此时 endDate === startDate，鼠标 hover 和 click 都需要显示一个范围\n        'in-range':\n          (dt >= cleanStart && dt <= cleanEnd) ||\n          (dt >= hoverStart && dt <= hoverEnd),\n        'start-date': cleanDt.isSame(cleanStart),\n        'end-date': cleanDt.isSame(cleanEnd),\n      };\n    },\n  },\n  computed: {\n    arrowLeftClass () {\n      return 'arrow-left v-drp__css-icon';\n    },\n    arrowRightClass () {\n      return 'arrow-right v-drp__css-icon';\n    },\n    // { Number } the month value for current calendar\n    month () {\n      return this.calendarMonth.month();\n    },\n    // TODO 这种有有依赖关系的 computed 是怎么处理的？\n    monthName () {\n      return this.locale.monthNames[this.month];\n    },\n    year () {\n      return this.calendarMonth.year();\n    },\n    /**\n     * TODO 这是一个数组，computed 数组的值 变化的时候，template 是怎么知道更新的呢\n     */\n    calendar () {\n      // Build the matrix of dates that will populate the calendar\n\n      const calendarMonth = this.calendarMonth;\n      const month = calendarMonth.month();\n      const year = calendarMonth.year();\n      const hour = calendarMonth.hour();\n      const minute = calendarMonth.minute();\n      const second = calendarMonth.second();\n      const daysInMonth = moment([year, month]).daysInMonth();\n      const firstDay = moment([year, month, 1]);\n      const lastDay = moment([year, month, daysInMonth]);\n      const lastMonth = moment(firstDay).subtract(1, 'month').month();\n      const lastYear = moment(firstDay).subtract(1, 'month').year();\n      const daysInLastMonth = moment([lastYear, lastMonth]).daysInMonth();\n      const dayOfWeek = firstDay.day();\n\n      // initialize a 6 rows x 7 columns array for the calendar\n      const calendar = [];\n      calendar.firstDay = firstDay;\n      calendar.lastDay = lastDay;\n\n      for (let i = 0; i < 6; i++) {\n        calendar[i] = [];\n      }\n\n      // populate the calendar with date objects\n      // 确定 6 * 7 日历中的第一天\n      let startDay = daysInLastMonth - dayOfWeek + this.locale.firstDay + 1;\n       // 2015-02-01，该月第一天是周日，此时 startDay > daysInLastMonth\n      // https://user-images.githubusercontent.com/12668546/51437731-43104280-1cdd-11e9-82ae-9c270144b2a9.png\n      if (startDay > daysInLastMonth) { startDay -= 7; }\n      if (dayOfWeek === this.locale.firstDay) { startDay = daysInLastMonth - 6; }\n\n      let curDate = moment([lastYear, lastMonth, startDay, 12, minute, second]);\n\n      for (let i = 0, col = 0, row = 0; i < 42; i++, col++, curDate = moment(curDate).add(24, 'hour')) {\n        if (i > 0 && col % 7 === 0) {\n          col = 0;\n          row++;\n        }\n        calendar[row][col] = curDate.clone().hour(hour).minute(minute).second(second);\n        curDate.hour(12);\n\n        // check for minDate and maxDate\n        // if (this._minDate && calendar[row][col].format('YYYY-MM-DD') === this._minDate.format('YYYY-MM-DD') && calendar[row][col].isBefore(this._minDate) && side === 'left') {\n        //   calendar[row][col] = this._minDate.clone();\n        // }\n\n        // if (this._maxDate && calendar[row][col].format('YYYY-MM-DD') === this._maxDate.format('YYYY-MM-DD') && calendar[row][col].isAfter(this._maxDate) && side === 'right') {\n        //   calendar[row][col] = this._maxDate.clone();\n        // }\n      }\n\n      return calendar;\n    },\n    // if show year select\n    RangeOfYear () {\n      if (!this.picker.showYearSelect) return [];\n      // TODO 这边因为依赖计算属性：this.calendar 那么是否需要处理 this.calendar[1]为空的情况？\n      // const currentYear = this.calendar[1][1].year();\n\n      const picker = this.picker;\n      const maxYear = (picker.maxDate && picker.maxDate.year()) || picker.maxYear;\n      const minYear = (picker.minDate && picker.minDate.year()) || picker.minYear;\n      return range(minYear, maxYear, 1);\n    },\n    activeYear: {\n      get () {\n        return this.calendarMonth.year();\n      },\n      set (newYear) {\n        const calendarMonth = moment([newYear, this.month]);\n        this.$emit('clickYearSelect', {\n          location: this.location,\n          calendarMonth,\n        });\n      },\n    },\n  },\n  filters: {\n    dateNum (value) {\n      return value.date();\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../styles/components/calendar.scss';\n</style>\n","'use strict';\n\nfunction normalizeComponent(template, style, script, scopeId, isFunctionalTemplate, moduleIdentifier\n/* server only */\n, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {\n  if (typeof shadowMode !== 'boolean') {\n    createInjectorSSR = createInjector;\n    createInjector = shadowMode;\n    shadowMode = false;\n  } // Vue.extend constructor export interop.\n\n\n  var options = typeof script === 'function' ? script.options : script; // render functions\n\n  if (template && template.render) {\n    options.render = template.render;\n    options.staticRenderFns = template.staticRenderFns;\n    options._compiled = true; // functional template\n\n    if (isFunctionalTemplate) {\n      options.functional = true;\n    }\n  } // scopedId\n\n\n  if (scopeId) {\n    options._scopeId = scopeId;\n  }\n\n  var hook;\n\n  if (moduleIdentifier) {\n    // server build\n    hook = function hook(context) {\n      // 2.3 injection\n      context = context || // cached call\n      this.$vnode && this.$vnode.ssrContext || // stateful\n      this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext; // functional\n      // 2.2 with runInNewContext: true\n\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__;\n      } // inject component styles\n\n\n      if (style) {\n        style.call(this, createInjectorSSR(context));\n      } // register component module identifier for async chunk inference\n\n\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier);\n      }\n    }; // used by ssr in case component is cached and beforeCreate\n    // never gets called\n\n\n    options._ssrRegister = hook;\n  } else if (style) {\n    hook = shadowMode ? function () {\n      style.call(this, createInjectorShadow(this.$root.$options.shadowRoot));\n    } : function (context) {\n      style.call(this, createInjector(context));\n    };\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // register for functional component in vue file\n      var originalRender = options.render;\n\n      options.render = function renderWithStyleInjection(h, context) {\n        hook.call(context);\n        return originalRender(h, context);\n      };\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate;\n      options.beforeCreate = existing ? [].concat(existing, hook) : [hook];\n    }\n  }\n\n  return script;\n}\n\nmodule.exports = normalizeComponent;\n//# sourceMappingURL=normalize-component.js.map\n","'use strict';\n\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\\\b/.test(navigator.userAgent.toLowerCase());\nfunction createInjector(context) {\n  return function (id, style) {\n    return addStyle(id, style);\n  };\n}\nvar HEAD = document.head || document.getElementsByTagName('head')[0];\nvar styles = {};\n\nfunction addStyle(id, css) {\n  var group = isOldIE ? css.media || 'default' : id;\n  var style = styles[group] || (styles[group] = {\n    ids: new Set(),\n    styles: []\n  });\n\n  if (!style.ids.has(id)) {\n    style.ids.add(id);\n    var code = css.source;\n\n    if (css.map) {\n      // https://developer.chrome.com/devtools/docs/javascript-debugging\n      // this makes source maps inside style tags work properly in Chrome\n      code += '\\n/*# sourceURL=' + css.map.sources[0] + ' */'; // http://stackoverflow.com/a/26603875\n\n      code += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) + ' */';\n    }\n\n    if (!style.element) {\n      style.element = document.createElement('style');\n      style.element.type = 'text/css';\n      if (css.media) style.element.setAttribute('media', css.media);\n      HEAD.appendChild(style.element);\n    }\n\n    if ('styleSheet' in style.element) {\n      style.styles.push(code);\n      style.element.styleSheet.cssText = style.styles.filter(Boolean).join('\\n');\n    } else {\n      var index = style.ids.size - 1;\n      var textNode = document.createTextNode(code);\n      var nodes = style.element.childNodes;\n      if (nodes[index]) style.element.removeChild(nodes[index]);\n      if (nodes.length) style.element.insertBefore(textNode, nodes[index]);else style.element.appendChild(textNode);\n    }\n  }\n}\n\nmodule.exports = createInjector;\n//# sourceMappingURL=browser.js.map\n","export default {\n  bind (el, binding, vnode) {\n    function documentHandler (e) {\n      if (el.contains(e.target)) {\n        return false;\n      }\n      if (binding.expression) {\n        binding.value(e);\n      }\n    }\n    el.__vueClickOutside__ = documentHandler;\n    document.addEventListener('click', documentHandler, true);\n  },\n  update () {},\n  unbind (el, binding) {\n    document.removeEventListener('click', el.__vueClickOutside__, true);\n    delete el.__vueClickOutside__;\n  },\n};\n","import moment from 'moment';\n\n/**\n * 生成时间快捷范围\n * @param { Number } startOffset start date 偏移\n * @param { Number } endOffset end date 偏移\n * @param { Number } period 时间维度：day or month\n */\nfunction getRange (startOffset = 0, endOffset = 0, period = 'day') {\n  return [\n    moment().subtract(startOffset, period).startOf(period),\n    moment().subtract(endOffset, period).endOf(period),\n  ];\n}\n\nexport const defaultPresets = [\n  {\n    label: 'Today',\n    range: getRange(0, 0),\n  },\n  {\n    label: 'Yesterday',\n    range: getRange(1, 1),\n  },\n  {\n    label: 'Last 7 Days',\n    range: getRange(6, 0),\n  },\n  {\n    label: 'Last 30 Days',\n    range: getRange(29, 0),\n  },\n  {\n    label: 'This Month',\n    range: getRange(0, 0, 'month'),\n  },\n  {\n    label: 'Last Month',\n    range: getRange(1, 1, 'month'),\n  },\n];\n","// import \"./styles/index.scss\";\n\nimport VMdDateRangePicker from './components/Picker.vue';\n\nconst install = function (Vue) {\n  Vue.component(VMdDateRangePicker.name, VMdDateRangePicker);\n};\n\n// auto install\nif (typeof window !== 'undefined' && window.Vue) {\n  install(window.Vue);\n}\n\nexport default {\n  install,\n  VMdDateRangePicker,\n};\n"],"names":["template","style","script","scopeId","isFunctionalTemplate","moduleIdentifier","shadowMode","createInjector","createInjectorSSR","createInjectorShadow","hook","options","render","staticRenderFns","_compiled","functional","_scopeId","context","this","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","call","_registeredComponents","add","_ssrRegister","$root","$options","shadowRoot","originalRender","h","existing","beforeCreate","concat","isOldIE","navigator","test","userAgent","toLowerCase","HEAD","document","head","getElementsByTagName","styles","id","css","group","media","ids","Set","has","code","source","map","sources","btoa","unescape","encodeURIComponent","JSON","stringify","element","createElement","type","setAttribute","appendChild","push","styleSheet","cssText","filter","Boolean","join","index","size","textNode","createTextNode","nodes","childNodes","removeChild","length","insertBefore","addStyle","bind","el","binding","vnode","documentHandler","e","contains","target","expression","value","__vueClickOutside__","addEventListener","update","unbind","removeEventListener","getRange","startOffset","endOffset","period","moment","subtract","startOf","endOf","defaultPresets","label","range","install","Vue","component","VMdDateRangePicker","name","window"],"mappings":";;;;mOAiDA,i9CAMA,4TC8BA,MAnFA,SAA4BA,EAAUC,EAAOC,EAAQC,EAASC,EAAsBC,EAElFC,EAAYC,EAAgBC,EAAmBC,GACrB,kBAAfH,IACTE,EAAoBD,EACpBA,EAAiBD,EACjBA,GAAa,GAIf,IAiBII,EAjBAC,EAA4B,mBAAXT,EAAwBA,EAAOS,QAAUT,EAsD9D,GApDIF,GAAYA,EAASY,SACvBD,EAAQC,OAASZ,EAASY,OAC1BD,EAAQE,gBAAkBb,EAASa,gBACnCF,EAAQG,WAAY,EAEhBV,IACFO,EAAQI,YAAa,IAKrBZ,IACFQ,EAAQK,SAAWb,GAKjBE,GAEFK,EAAO,SAAcO,IAEnBA,EAAUA,GACVC,KAAKC,QAAUD,KAAKC,OAAOC,YAC3BF,KAAKG,QAAUH,KAAKG,OAAOF,QAAUD,KAAKG,OAAOF,OAAOC,aAGT,oBAAxBE,sBACrBL,EAAUK,qBAIRrB,GACFA,EAAMsB,KAAKL,KAAMV,EAAkBS,IAIjCA,GAAWA,EAAQO,uBACrBP,EAAQO,sBAAsBC,IAAIpB,IAMtCM,EAAQe,aAAehB,GACdT,IACTS,EAAOJ,EAAa,WAClBL,EAAMsB,KAAKL,KAAMT,EAAqBS,KAAKS,MAAMC,SAASC,cACxD,SAAUZ,GACZhB,EAAMsB,KAAKL,KAAMX,EAAeU,MAIhCP,EACF,GAAIC,EAAQI,WAAY,CAEtB,IAAIe,EAAiBnB,EAAQC,OAE7BD,EAAQC,OAAS,SAAkCmB,EAAGd,GAEpD,OADAP,EAAKa,KAAKN,GACHa,EAAeC,EAAGd,QAEtB,CAEL,IAAIe,EAAWrB,EAAQsB,aACvBtB,EAAQsB,aAAeD,EAAW,GAAGE,OAAOF,EAAUtB,GAAQ,CAACA,GAInE,OAAOR,GChFLiC,EAA+B,oBAAdC,WAA6B,gBAAgBC,KAAKD,UAAUE,UAAUC,eAM3F,IAAIC,EAAOC,SAASC,MAAQD,SAASE,qBAAqB,QAAQ,GAC9DC,EAAS,GAyCb,MA/CA,SAAwB3B,GACtB,OAAO,SAAU4B,EAAI5C,GACnB,OAMJ,SAAkB4C,EAAIC,GACpB,IAAIC,EAAQZ,EAAUW,EAAIE,OAAS,UAAYH,EAC3C5C,EAAQ2C,EAAOG,KAAWH,EAAOG,GAAS,CAC5CE,IAAK,IAAIC,IACTN,OAAQ,KAGV,IAAK3C,EAAMgD,IAAIE,IAAIN,GAAK,CACtB5C,EAAMgD,IAAIxB,IAAIoB,GACd,IAAIO,EAAON,EAAIO,OAiBf,GAfIP,EAAIQ,MAGNF,GAAQ,mBAAqBN,EAAIQ,IAAIC,QAAQ,GAAK,MAElDH,GAAQ,uDAAyDI,KAAKC,SAASC,mBAAmBC,KAAKC,UAAUd,EAAIQ,QAAU,OAG5HrD,EAAM4D,UACT5D,EAAM4D,QAAUpB,SAASqB,cAAc,SACvC7D,EAAM4D,QAAQE,KAAO,WACjBjB,EAAIE,OAAO/C,EAAM4D,QAAQG,aAAa,QAASlB,EAAIE,OACvDR,EAAKyB,YAAYhE,EAAM4D,UAGrB,eAAgB5D,EAAM4D,QACxB5D,EAAM2C,OAAOsB,KAAKd,GAClBnD,EAAM4D,QAAQM,WAAWC,QAAUnE,EAAM2C,OAAOyB,OAAOC,SAASC,KAAK,UAChE,CACL,IAAIC,EAAQvE,EAAMgD,IAAIwB,KAAO,EACzBC,EAAWjC,SAASkC,eAAevB,GACnCwB,EAAQ3E,EAAM4D,QAAQgB,WACtBD,EAAMJ,IAAQvE,EAAM4D,QAAQiB,YAAYF,EAAMJ,IAC9CI,EAAMG,OAAQ9E,EAAM4D,QAAQmB,aAAaN,EAAUE,EAAMJ,IAAavE,EAAM4D,QAAQI,YAAYS,KAxC/FO,CAASpC,EAAI5C,45QCLT,CACbiF,KAAMC,EAAIC,EAASC,YACRC,EAAiBC,MACpBJ,EAAGK,SAASD,EAAEE,eACT,EAELL,EAAQM,YACVN,EAAQO,MAAMJ,GAGlBJ,EAAGS,oBAAsBN,EACzB7C,SAASoD,iBAAiB,QAASP,GAAiB,IAEtDQ,WACAC,OAAQZ,EAAIC,GACV3C,SAASuD,oBAAoB,QAASb,EAAGS,qBAAqB,UACvDT,EAAGS,sBCRd,SAASK,EAAUC,EAAc,EAAGC,EAAY,EAAGC,EAAS,aACnD,CACLC,IAASC,SAASJ,EAAaE,GAAQG,QAAQH,GAC/CC,IAASC,SAASH,EAAWC,GAAQI,MAAMJ,IAIxC,MAAMK,EAAiB,CAC5B,CACEC,MAAO,QACPC,MAAOV,EAAS,EAAG,IAErB,CACES,MAAO,YACPC,MAAOV,EAAS,EAAG,IAErB,CACES,MAAO,cACPC,MAAOV,EAAS,EAAG,IAErB,CACES,MAAO,eACPC,MAAOV,EAAS,GAAI,IAEtB,CACES,MAAO,aACPC,MAAOV,EAAS,EAAG,EAAG,UAExB,CACES,MAAO,aACPC,MAAOV,EAAS,EAAG,EAAG,8uPClC1B,MAAMW,EAAU,SAAUC,GACxBA,EAAIC,UAAUC,EAAmBC,KAAMD,UAInB,oBAAXE,QAA0BA,OAAOJ,KAC1CD,EAAQK,OAAOJ,KAGF,CACbD,QAAAA,EACAG,mBAAAA"}